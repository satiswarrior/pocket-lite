# Pocket Lite
Pocket Lite is an app to lighten your pocket.

# 1. Цель проекта

Цель проекта — разработать приложение для удобного хранения карт и документов в смартфоне для быстрого доступа к ним (далее Приложение). 

Пользователь сможет добавлять в Приложение разные типы документов, редактировать их, а также отправлять их  (например скан паспорта) в другие приложения.

Помимо этого в Приложении можно будет хранить дисконтные карты и быстро предъявлять их на кассах магазинов. Для тех, у кого нет карты определенного магазина будет возможность воспользоваться демо-картой (скан нашей карты) этого магазина, если она есть в приложении. 


# 2. Описание приложения

Приложение состоит из следующих основных функциональных блоков:

1. Функционал работы с дисконтными картами
2. Демо-карты популярных магазинов
3. Функционал работы с документами
4. Функционал бэкапа всех карт и документов
6. Функционал покупки премиума
7. Дополнительный функционал


## 2.1. Типы пользователей

Приложение предусматривает два типа пользователей: стандартный владелец кошелька и премиум пользователь.
Стандартный владелец ограничен 10 картами и одним документом. Премиум пользователь не ограничен количеством карт и документов и имеет возможность перенести данные на другой телефон.


## 2.2. Функционал работы с дисконтными картами

Пользователь получает доступ к работе с дисконтными картами после первого входа в Приложение. Этот функционал состоит из следующих блоков:

1. Первичное обучение
2. Добавление новой карты
3. Просмотр данных карты
4. Редактирование карты
5. Удаление карты


### 2.4.1. Первичное обучение

После первого запуска запускается быстрый гайд по основным разделам приложения с возможностью пропустить обучение.
После обновления должно запускаться обучение новым фичам.
При желании обучение можно повторно запустить в разделе "Дополнительно".


### 2.4.2. Добавление новой карты

По каждой дисконтной карте задается:

* название карты
* категория карты
* обложка карты
* номер карты (в виде qr-кода, штрих-кода или номера)

Должна быть возможность задать номер карты с помощью наведения камеры на qr/штрих код карты, сканирование кода по скриншоту/фотографии, вводу данных в текстовое поле.


### 2.4.3. Просмотр данных карты

В кошельке карты отображаются в виде обложек, которые мы указали при создании карты. По нажатию на обложку открывается окно просмотра данных карты. В верхней части отображается название, категория и обложка карты.
В центральной части располагаются данные для сканирования на кассе.
В нижней части кнопки для редактирования и удаления карты.

Для удобства сканирования яркость экрана надо выкручивать до 80%.


### 2.4.4. Редактирование данных карты

По нажатию на кнопку "Редактировать" в окне просмотра данных карты открывается окно как при добавлении новой карты, но с уже заполненными полями.
После внесения изменений у пользователя есть выбор:

* Кнопка "Сохранить" - сохранить изменения и выйти из окна редактирования
* Кнопка "Отмена" - откатить изменения и выйти из окна редактирования

Если пользователь нажал кнопку "Назад" на телефоне, то появляется диалоговое окно с текстом "Сохранить изменения?" и две кнопки "Да" и "Нет". Если пользователь нажмет на темную часть экрана, то диалоговое окно закрывается и происходит возврат в окно редактирования карты.


### 2.4.5. Удаление карты

По нажатию на кнопку "Удалить" в окне просмотра данных карт появляется диалоговое окно с текстом "Удалить карту?" и две кнопки "Да" и "Нет". Если пользователь нажмет на темную часть экрана, то диалоговое окно закрывается и происходит возврат в окно просмотра данных карты.


## 2.5. Демо-карты

Отдельной вкладкой в приложении должны быть демо-карты — это список готовых карт популярных магазинов. В случае, если у пользователя нет карты определенного магазина и ему не хочется заводить свою, он может мгновенно воспользоваться демо-картой (по аналогии с бонусными картами на авито).

По нажатию на демо-карту в кошельке открывается стандартное окно просмотра данных карты, но без возможности редактирования и удаления карты.

В демо-карты нужно забить данные карт магазинов, в которых нельзя просто так списать бонусы.


## 2.6. Функционал работы с документами

В приложении должен быть отдельный раздел для работы с документами и иметь следующий функционал:

1. Первичное обучение
2. Добавление нового документа
3. Просмотр данных документа
4. Отправка скана документа 
5. Редактирование документа
6. Удаление документа


### 2.6.1. Первичное обучение

После первого открытия раздела "Документы" запускается быстрый гайд по основным разделам приложения с возможностью пропустить обучение.
После обновления должно запускаться обучение новым фичам.
При желании обучение можно повторно запустить в разделе "Дополнительно".


### 2.6.2. Добавление нового документа

По каждому документу задается:

* название документа
* тип документа
* файл из системы
* флажок "Указывать водный знак"

Должна быть возможность выбрать файл из системы, фото из галереи или сделать фото с помощью камеры (камера в последнюю очередь).

Флажок "Указывать водный знак" автоматически отмечается, если выбран важный тип документа, типа паспорт (чуть позже определим какие документы считаются важными). Водный знак предлагаем задавать для того, чтобы при отправке скана третьим лицам, они не могли воспользоваться этим сканом для корыстных целей, например взять кредит. 


### 2.6.3. Просмотр данных документа

Все документы выводятся в виде обложек в зависимости от того, какой тип документов был указан. Для паспорта, снилса, полиса и тд. создадим стандартные шаблоны, чтобы они красиво отображались в списке. По нажатию на документ в списке открывается окно просмотра данных документа.
В верхней части отображается название и категория документа.
В центральной части превью документа, если нажать на превью, то открывается просмотр содержимого.
Чуть ниже превью располагается кнопка "Отправить скан".
В нижней части кнопки для редактирования и удаления документа.

### 2.6.4. Отправка скана документа

По нажатию на кнопку "Отправить скан" в окне просмотра данных документа открывается стандартное системное окно "Share", т.е. отправить в стороннее приложение.

Но, если в документе отмечен флажок "Указывать водный знак", то перед отправкой появляется диалоговое окно с полями "кому" и "цель" для редактирования водного знака.

Введенные данные будут преобразованы в строку следующего вида: "Данный документ предоставляется в {кому} для {цель}. Дата создания: {дата}".
Пример: "Данный документ предоставляется в Сбербанк для получения кредита. Дата создания: 01.01.2000".

Эта строка добавляется в виде водного знака на все страницы документа. После ввода данных открывается стандартное системное окно "Share".

По умолчанию будем отправлять скан в виде pdf файла, потом добавим другие форматы.


### 2.6.5. Редактирование данных документа

По нажатию на кнопку "Редактировать" в окне просмотра данных документа открывается окно как при добавлении нового документа, но с уже заполненными полями.
После внесения изменений у пользователя есть выбор:

* Кнопка "Сохранить" - сохранить изменения и выйти из окна редактирования
* Кнопка "Отмена" - откатить изменения и выйти из окна редактирования

Если пользователь нажал кнопку "Назад" на телефоне, то появляется диалоговое окно с текстом "Сохранить изменения?" и две кнопки "Да" и "Нет". Если пользователь нажмет на темную часть экрана, то диалоговое окно закрывается и происходит возврат в окно редактирования документа.


### 2.6.6. Удаление документа

По нажатию на кнопку "Удалить" в окне просмотра данных документа появляется диалоговое окно с текстом "Удалить документ?" и две кнопки "Да" и "Нет". Если пользователь нажмет на темную часть экрана, то диалоговое окно закрывается и происходит возврат в окно просмотра данных документа.


## 2.7. Функционал покупки премиума

Каждый раз, когда пользователь хочет воспользоваться функциями, доступными только для премиум пользователей (например добавить больше одного документа), будем показывать диалоговое окно с предложением подключить премиум.

По нажатию на кнопку "Стать Premium" открывается окно, в котором будет страничка браузера с выбранной системой оплаты. после успешной оплаты должны открываться новые возможности.

Для того чтобы определять у кого есть премиум, а у кого нет, нам нужна привязка аккаунта по номеру телефона или по e-mail. Продумать, как это сделать.


## 2.8. Функционал бэкапа всех карт и документов

У обладателей премиум аккаунта будет эксклюзивная возможность переноса карт и документов с одного телефона на другой.

В ходе проекта необходимо придумать способ создания бэкапа.

Пока что я предлагаю такой способ: на телефоне 1 пользователь нажимает "создать бэкап", мы генерируем случайное 6-значное число и присылать его на почту или на телефон. Указав это число на телефоне 2, начинается скачивание бэкапа на новое устройство.


## 2.9. Дополнительный функционал

В программе будет раздел "Дополнительно" в котором будет функционал, не относящийся ко всем предыдущим пунктам. 

### 2.9.1. Функционал перезапуска обучения

Здесь можно перезапустить первичное обучение, быстрый гайд по основным разделам приложения.

### 2.9.2. Функционал отправки баг-репортов

Для обратной связи нам нужна возможность получить письмо от пользователей с описанием ошибки. По нажатию на кнопку "Нашли ошибку?" открывается диалоговое окно с формой, в которой можно указать тип ошибки и ее описание.

### 2.9.3. Настройки

Здесь будут всевозможные настройки касающиеся безопасности, темы оформления и тд.

### 2.9.4. Об авторах

Здесь будет инфа об участниках проекта с контактными данными. А так же ссылка на git-hub проекта и сайт (если он будет). 

### 2.9.5. Функционал отправки уведомлений

Нужно заложить возможность отправки push-уведомлений на телефон и писем на e-mail. Их можно использовать для информирования пользователей о новом функционале, промо акциях, а так же для отправки пин-кодов.


# 3. Предлагаемый стек технологий

Для реализации системы предлагается следующий стек технологий:

* Фронтенд (одно из трех):
    - Kotlin/Java
    - Flutter
    - React native
* Бэкенд вариант 1 (взял из чужого ТЗ):
    - Язык Python
    - Фреймворк FastAPI
    - БД PostgreSQL
    - SQLAlchemy ORM
    - Alembic для миграций
* Бэкенд вариант 2:
    - Язык TS
    - Платформа Node JS
    - Фреймворк надо поизучать и выбрать
    - БД PostgreSQL

Для интернет-эквайринга рассматриваются Тинькофф, CloudPayments и ЮМани, в ходе проекта надо сравнить технические возможности платформ и комиссии за платежи. Важно открыть в эквайринге другие страны для возможности приёма оплаты не только из РФ, но и из стран СНГ и других стран. Обсудить это в ходе проекта с эквайрингом.

Хранение файлов и изображений, загружаемых автором, должно осуществляться
в S3-совместимом хранилище.


# 4. Требования к дизайну

Минимализм, лаконичность, каноничный андроидовский Material design, светлая и темная тема (сначала темная).

В рамках этого проекта надо разработать логотип. Было бы прикольно сделать маскот (отдать дань японским традициям :)).
